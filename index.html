<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rescue Companion (Demo) | Adopt, Volunteer, Donate</title>
  <meta name="description" content="A private demo mockup for a cat rescue companion app concept. Mock cats, labeled external links, and demo shelter directory." />

  <style>
    :root{
      /* iOS-ish palette */
      --bg0:#0b0c10;
      --bg1:#12141b;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.10);
      --stroke2: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.66);
      --muted2: rgba(255,255,255,.44);

      --accent:#7c5cff;
      --accent2:#2dd4bf;
      --good:#34c759;
      --warn:#ff9f0a;

      --radius:18px;
      --radius2:24px;
      --max: 1120px;

      --shadow: 0 14px 40px rgba(0,0,0,.35);
      --shadow2: 0 10px 24px rgba(0,0,0,.28);

      --blur: 14px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:
        radial-gradient(900px 520px at 18% 12%, rgba(124,92,255,.20), transparent 60%),
        radial-gradient(720px 460px at 82% 20%, rgba(45,212,191,.12), transparent 55%),
        radial-gradient(820px 560px at 50% 110%, rgba(255,159,10,.10), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      line-height:1.45;
    }

    a{ color:inherit; }
    .wrap{ max-width:var(--max); margin:0 auto; padding:20px 16px 92px; }

    /* Top nav */
    .top{
      position:sticky;
      top:0;
      z-index:30;
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      background: rgba(15,16,22,.55);
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .topInner{
      max-width:var(--max);
      margin:0 auto;
      padding:12px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .appIcon{
      width:34px; height:34px;
      border-radius:10px;
      background:
        radial-gradient(14px 14px at 30% 30%, rgba(255,255,255,.18), transparent 60%),
        linear-gradient(135deg, rgba(124,92,255,.95), rgba(45,212,191,.75));
      box-shadow: 0 10px 18px rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.14);
      flex:0 0 auto;
    }
    .brandText{ display:flex; flex-direction:column; line-height:1.1; min-width:0; }
    .brandText strong{
      font-size:13px;
      letter-spacing:.2px;
      font-weight:720;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .brandText span{
      font-size:12px;
      color:var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .topActions{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:flex-end; }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:9px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 10px 22px rgba(0,0,0,.18);
      font-size:12px;
      color:var(--muted);
      text-decoration:none;
      user-select:none;
      white-space:nowrap;
    }
    .pill:hover{ border-color: rgba(255,255,255,.16); }
    .dot{
      width:8px; height:8px; border-radius:99px;
      background: var(--good);
      box-shadow: 0 0 0 4px rgba(52,199,89,.12);
    }
    .dot.off{
      background: rgba(255,255,255,.28);
      box-shadow:none;
    }

    /* Toggle (iOS-ish) */
    .toggle{
      display:flex;
      align-items:center;
      gap:10px;
      padding:8px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
    }
    .toggle label{
      font-size:12px;
      color:var(--muted);
      user-select:none;
      letter-spacing:.2px;
    }
    .switch{
      position:relative;
      width:42px;
      height:24px;
      border-radius:999px;
      background: rgba(255,255,255,.18);
      border:1px solid rgba(255,255,255,.10);
      cursor:pointer;
      flex:0 0 auto;
      transition: background .18s ease, border-color .18s ease;
    }
    .knob{
      position:absolute;
      top:2px;
      left:2px;
      width:20px;
      height:20px;
      border-radius:999px;
      background: rgba(255,255,255,.92);
      box-shadow: 0 8px 16px rgba(0,0,0,.25);
      transition: transform .18s ease;
    }
    .switch.on{
      background: rgba(52,199,89,.85);
      border-color: rgba(52,199,89,.45);
    }
    .switch.on .knob{ transform: translateX(18px); }

    /* Hero */
    .hero{
      padding:18px 0 0;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
      align-items:start;
    }
    @media (max-width: 920px){
      .hero{ grid-template-columns: 1fr; }
    }

    .panel{
      border-radius: var(--radius2);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .panelInner{ padding:18px; }

    .eyebrow{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      color:var(--muted);
      letter-spacing:.4px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }
    .badge{
      padding:4px 10px;
      border-radius:999px;
      background: rgba(124,92,255,.14);
      border:1px solid rgba(124,92,255,.26);
      color: rgba(255,255,255,.85);
      font-size:12px;
    }
    h1{
      margin:0 0 10px;
      font-size:34px;
      letter-spacing:-.4px;
      line-height:1.08;
      font-weight:780;
    }
    .lede{
      margin:0 0 14px;
      color:var(--muted);
      font-size:14px;
      max-width:68ch;
    }

    /* Segmented control */
    .seg{
      display:inline-flex;
      gap:0;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      border-radius:999px;
      padding:3px;
      margin:6px 0 14px;
      width:100%;
      max-width:520px;
    }
    .seg button{
      flex:1;
      border:0;
      background: transparent;
      color: var(--muted);
      font-size:13px;
      padding:10px 12px;
      border-radius:999px;
      cursor:pointer;
      transition: background .18s ease, color .18s ease;
      white-space:nowrap;
    }
    .seg button.active{
      background: rgba(255,255,255,.16);
      color: rgba(255,255,255,.92);
      box-shadow: 0 10px 18px rgba(0,0,0,.18);
    }

    /* Buttons */
    .ctaRow{ display:flex; flex-wrap:wrap; gap:10px; }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:12px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.90);
      text-decoration:none;
      font-size:14px;
      letter-spacing:.2px;
      box-shadow: var(--shadow2);
      user-select:none;
      cursor:pointer;
      white-space:nowrap;
    }
    .btn:hover{ border-color: rgba(255,255,255,.24); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(124,92,255,.95), rgba(45,212,191,.78));
      border-color: rgba(255,255,255,.14);
    }
    .btn.ghost{
      background: transparent;
      border-color: rgba(255,255,255,.14);
    }
    .btn.small{
      padding:9px 12px;
      font-size:13px;
    }
    .btn.warn{
      background: rgba(255,159,10,.14);
      border-color: rgba(255,159,10,.28);
    }
    .btn.good{
      background: rgba(52,199,89,.14);
      border-color: rgba(52,199,89,.28);
    }

    /* Right hero card */
    .miniTitle{
      font-size:12px;
      letter-spacing:1.8px;
      text-transform:uppercase;
      color: var(--muted);
      margin:0 0 10px;
    }
    .kv{
      display:grid;
      gap:10px;
    }
    .kvRow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      padding:12px;
      border-radius:16px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
    }
    .kvRow strong{ font-size:13px; }
    .kvRow span{ font-size:12px; color:var(--muted); display:block; margin-top:4px; max-width:44ch; }
    .tag{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.07);
      border:1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.78);
      white-space:nowrap;
      height:fit-content;
    }

    /* Sections */
    .section{
      margin-top:14px;
      border-radius: var(--radius2);
      background: rgba(255,255,255,.045);
      border:1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .sectionHead{
      padding:16px 18px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      border-bottom:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
    }
    .sectionHead h2{
      margin:0;
      font-size:16px;
      letter-spacing:.2px;
    }
    .sectionHead p{
      margin:2px 0 0;
      color: var(--muted);
      font-size:13px;
      max-width:70ch;
    }
    .sectionBody{ padding:16px 18px; }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      border-radius: var(--radius);
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
      box-shadow: 0 10px 20px rgba(0,0,0,.18);
    }
    .cardInner{ padding:14px; }
    .cardTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }
    .card h3{
      margin:0;
      font-size:15px;
      letter-spacing:.1px;
    }
    .sub{
      font-size:12px;
      color: var(--muted);
      margin-top:4px;
    }

    /* Featured shelters row */
    .featuredWrap{
      display:flex;
      gap:12px;
      overflow:auto;
      padding-bottom:6px;
      scroll-snap-type:x mandatory;
      -webkit-overflow-scrolling: touch;
    }
    .featuredWrap::-webkit-scrollbar{ height:8px; }
    .featuredWrap::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.10); border-radius:999px; }

    .featuredCard{
      scroll-snap-align:start;
      min-width: 260px;
      max-width: 320px;
      border-radius: var(--radius2);
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .featuredTop{
      padding:14px 14px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .logoBubble{
      width:40px; height:40px;
      border-radius:14px;
      background:
        radial-gradient(18px 18px at 30% 30%, rgba(255,255,255,.18), transparent 60%),
        linear-gradient(135deg, rgba(124,92,255,.85), rgba(45,212,191,.55));
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 12px 18px rgba(0,0,0,.18);
      display:grid;
      place-items:center;
      font-weight:800;
      letter-spacing:.3px;
      color: rgba(255,255,255,.92);
      flex:0 0 auto;
    }
    .featuredMeta{
      min-width:0;
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .featuredMeta strong{
      font-size:13px;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .featuredMeta span{
      font-size:12px;
      color: var(--muted);
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .featuredBottom{
      padding:0 14px 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
    }
    .featuredPill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.78);
      font-size:12px;
      user-select:none;
    }

    /* Cat list */
    .catsHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
      flex-wrap:wrap;
    }
    .search{
      flex: 1 1 240px;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:14px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
    }
    .search input{
      width:100%;
      border:0;
      outline:none;
      background: transparent;
      color: rgba(255,255,255,.92);
      font-size:14px;
    }
    .search input::placeholder{ color: rgba(255,255,255,.40); }

    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .chip{
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.74);
      font-size:12px;
      cursor:pointer;
      user-select:none;
    }
    .chip.active{
      background: rgba(124,92,255,.20);
      border-color: rgba(124,92,255,.34);
      color: rgba(255,255,255,.88);
    }

    .catGrid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    @media (max-width: 980px){
      .catGrid{ grid-template-columns: 1fr; }
    }
    .catCard{
      border-radius: var(--radius2);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadow2);
    }

    /* Real thumbnails */
    .catMedia{
      position:relative;
      height:170px;
      overflow:hidden;
      background: rgba(255,255,255,.06);
    }
    .catMedia img.hero{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      filter: saturate(1.05) contrast(1.02);
      transform: scale(1.02);
    }
    .mediaLabel{
      position:absolute;
      left:12px;
      top:10px;
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      color: rgba(255,255,255,.90);
      background: rgba(0,0,0,.28);
      border:1px solid rgba(255,255,255,.16);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      user-select:none;
    }
    .thumbRow{
      position:absolute;
      left:12px;
      right:12px;
      bottom:12px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    .thumb{
      height:56px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.16);
      box-shadow: 0 12px 20px rgba(0,0,0,.20);
      overflow:hidden;
      background: rgba(255,255,255,.06);
    }
    .thumb img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      filter: saturate(1.02) contrast(1.02);
    }

    .catBody{ padding:14px; }
    .catTitle{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .catTitle strong{ font-size:15px; }
    .meta{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .meta span{
      font-size:12px;
      color: rgba(255,255,255,.74);
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
    }
    .catNote{
      margin-top:10px;
      font-size:13px;
      color: var(--muted);
    }

    /* Form */
    form label{
      display:block;
      font-size:12px;
      color: var(--muted);
      letter-spacing:.18em;
      text-transform:uppercase;
      margin:10px 0 6px;
    }
    input, textarea, select{
      width:100%;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.92);
      border-radius:14px;
      padding:12px 12px;
      font-size:14px;
      outline:none;
    }
    textarea{ min-height:120px; resize:vertical; }
    input::placeholder, textarea::placeholder{ color: rgba(255,255,255,.38); }
    .help{
      margin-top:10px;
      color: var(--muted);
      font-size:13px;
    }
    .toast{
      display:none;
      margin-top:12px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(52,199,89,.28);
      background: rgba(52,199,89,.12);
      color: rgba(255,255,255,.90);
      font-size:13px;
    }

    /* External link labels */
    .ext{
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size:12px;
      color: var(--muted);
      text-decoration:none;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      user-select:none;
      white-space:nowrap;
    }
    .ext:hover{ border-color: rgba(255,255,255,.18); }

    /* Shelter picker */
    .pickerRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin:12px 0 14px;
    }
    .picker{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:16px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      flex: 1 1 320px;
      min-width: 240px;
    }
    .picker span{
      font-size:12px;
      color: var(--muted);
      letter-spacing:.12em;
      text-transform:uppercase;
      white-space:nowrap;
    }
    .picker select{
      border:0;
      background: transparent;
      padding:0;
      margin:0;
      min-height:auto;
      color: rgba(255,255,255,.92);
      font-size:14px;
      width:100%;
      outline:none;
      cursor:pointer;
    }
    .picker select option{ color:#0b0c10; }

    /* Modal */
    .modalOverlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      z-index:60;
      display:none;
      padding:18px;
    }
    .modalOverlay.show{ display:grid; place-items:center; }
    .modal{
      width:min(820px, 100%);
      border-radius: var(--radius2);
      border:1px solid rgba(255,255,255,.14);
      background: rgba(18,20,27,.92);
      box-shadow: 0 24px 60px rgba(0,0,0,.55);
      overflow:hidden;
    }
    .modalHead{
      padding:14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .modalHead strong{ font-size:13px; letter-spacing:.2px; }
    .modalHead .small{ color: var(--muted); font-size:12px; }
    .modalBody{ padding:14px 16px 16px; }
    .modalBody textarea{
      min-height:240px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:13px;
      line-height:1.4;
    }
    .modalFoot{
      padding:14px 16px 16px;
      border-top:1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .err{
      display:none;
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(255,69,58,.28);
      background: rgba(255,69,58,.12);
      color: rgba(255,255,255,.92);
      font-size:13px;
    }

    /* Bottom tab bar */
    .tabbar{
      position:fixed;
      left:0; right:0; bottom:0;
      z-index:40;
      padding:10px 12px 14px;
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      background: rgba(12,12,18,.62);
      border-top:1px solid rgba(255,255,255,.10);
    }
    .tabs{
      max-width:var(--max);
      margin:0 auto;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
    }
    .tab{
      border-radius:16px;
      padding:10px 10px;
      text-align:center;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.70);
      font-size:12px;
      cursor:pointer;
      user-select:none;
    }
    .tab.active{
      background: rgba(255,255,255,.12);
      color: rgba(255,255,255,.92);
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 12px 24px rgba(0,0,0,.20);
    }

    /* Utility */
    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .muted{ color: var(--muted); }
    .small{ font-size:12px; color: var(--muted); }
    .sep{ height:1px; background: rgba(255,255,255,.08); margin:12px 0; }
  </style>
</head>

<body>
  <!-- Sticky top bar -->
  <div class="top">
    <div class="topInner">
      <div class="brand">
        <div class="appIcon" aria-hidden="true"></div>
        <div class="brandText">
          <strong>Rescue Companion (Demo)</strong>
          <span id="brandSub">Mock cats, demo shelter picker, labeled external links</span>
        </div>
      </div>

      <div class="topActions">
        <a class="pill" id="callPill" href="tel:7019795602" title="Call (label only)">
          <span class="dot off" id="phoneDot"></span>
          <span id="callLabel">Call (label): 701-979-5602</span>
        </a>

        <div class="toggle" title="Shows this is a prototype using mock data">
          <label for="demoSwitch">Demo Mode</label>
          <div class="switch on" id="demoSwitch" role="switch" aria-checked="true" tabindex="0">
            <div class="knob"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="wrap">
    <!-- HERO -->
    <section class="hero">
      <div class="panel">
        <div class="panelInner">
          <div class="eyebrow">
            <span class="badge">Option B prototype</span>
            <span class="muted">One app, many shelters, demo-only local import</span>
            <span class="tag" id="activeShelterTag">Selected: Meowsers Cat Rescue</span>
          </div>

          <h1>A clean, app-like home for adopt, donate, volunteer, and reporting cats in need.</h1>
          <p class="lede">
            This demo shows the "one look for all shelters" approach. You can switch shelters, the labeled external links update instantly,
            and you can add a new shelter via JSON import for demo purposes.
          </p>

          <div class="pickerRow">
            <div class="picker" aria-label="Shelter picker">
              <span>Shelter</span>
              <select id="shelterSelect" aria-label="Choose a shelter"></select>
            </div>
            <button class="btn small" type="button" id="openImport">Add your shelter (JSON)</button>
            <button class="btn small ghost" type="button" id="clearCustom">Reset custom shelters</button>
          </div>

          <div class="seg" role="tablist" aria-label="Primary focus">
            <button class="active" data-focus="featured" type="button">Featured</button>
            <button data-focus="adopt" type="button">Adopt</button>
            <button data-focus="report" type="button">Report</button>
          </div>

          <div class="ctaRow">
            <a class="btn primary" href="#featured" id="goFeatured">Featured shelters</a>
            <a class="btn" href="#adopt" id="goAdopt">Browse adoptable cats (mock)</a>
            <a class="btn ghost" id="linkAdoption" href="https://meowserscatrescue.org/adoption" target="_blank" rel="noopener">Open Adoption page (external)</a>
            <a class="btn ghost" id="linkDonate" href="https://meowserscatrescue.org/donate" target="_blank" rel="noopener">Open Donate page (external)</a>
          </div>

          <div class="sep"></div>

          <div class="row">
            <a class="ext" id="linkWebsite" href="https://meowserscatrescue.org/" target="_blank" rel="noopener">Website (external)</a>
            <a class="ext" id="linkVolunteer" href="https://meowserscatrescue.org/volunteer" target="_blank" rel="noopener">Volunteer (external)</a>
            <a class="ext" id="linkShop" href="https://meowserscatrescue.org/shop" target="_blank" rel="noopener">Shop (external)</a>
            <a class="ext" id="linkContact" href="https://meowserscatrescue.org/contact-us" target="_blank" rel="noopener">Contact page (external)</a>
          </div>

          <p class="help" id="pitchNote">
            Pitch angle: shelters keep their site. This app adds a unified directory, a better mobile experience, and a report intake pipeline.
            Version 1 can route reports to email or a shared sheet later.
          </p>
        </div>
      </div>

      <div class="panel">
        <div class="panelInner">
          <p class="miniTitle">What this demo includes</p>

          <div class="kv">
            <div class="kvRow">
              <div>
                <strong>Shelter directory</strong>
                <span>Picker switches shelters instantly, links and contact update across the UI.</span>
              </div>
              <div class="tag">Demo</div>
            </div>

            <div class="kvRow">
              <div>
                <strong>Add your shelter (JSON)</strong>
                <span>Paste a shelter config, it appears in the picker immediately. Stored locally on device.</span>
              </div>
              <div class="tag">Local</div>
            </div>

            <div class="kvRow">
              <div>
                <strong>Featured shelters row</strong>
                <span>Horizontal row on the home screen, tap to select and jump to adopt.</span>
              </div>
              <div class="tag">Home</div>
            </div>

            <div class="kvRow">
              <div>
                <strong>Adoptable list</strong>
                <span>Mock profiles with real cat photos (placeholder service), so it feels believable fast.</span>
              </div>
              <div class="tag">Mock</div>
            </div>
          </div>

          <div class="sep"></div>

          <div class="row">
            <a class="btn small warn" id="linkAdoptionPdf" href="https://img1.wsimg.com/blobby/go/9dd7ccac-599b-4487-8e06-01b1cbf3db2d/downloads/Adoption%20Application.pdf?ver=1761926270623" target="_blank" rel="noopener">
              Adoption Application PDF (external)
            </a>
            <a class="btn small good" id="linkVolunteerPdf" href="https://img1.wsimg.com/blobby/go/9dd7ccac-599b-4487-8e06-01b1cbf3db2d/downloads/Volunteer%20Application.pdf?ver=1761926270217" target="_blank" rel="noopener">
              Volunteer Application PDF (external)
            </a>
          </div>

          <p class="small" style="margin-top:10px;">
            Note: All shelter data in this demo is mock, except the Meowsers links which are real and clearly labeled as external.
          </p>
        </div>
      </div>
    </section>

    <!-- FEATURED -->
    <section class="section" id="featured">
      <div class="sectionHead">
        <div>
          <h2>Featured shelters</h2>
          <p>Demo-only showcase row, tap a shelter to select it, then jump into Adopt, Donate, Volunteer, or Report.</p>
        </div>
        <div class="row">
          <span class="tag" id="featuredCount">0 featured</span>
        </div>
      </div>

      <div class="sectionBody">
        <div class="featuredWrap" id="featuredRow"></div>
        <p class="help" style="margin-top:10px;">
          In a real app, this row could be curated, promoted, or tied to a subscription tier.
        </p>
      </div>
    </section>

    <!-- ADOPT -->
    <section class="section" id="adopt">
      <div class="sectionHead">
        <div>
          <h2>Adoptable Cats (mock data)</h2>
          <p>App-like cards with real cat photos. In a real build, these could pull from a Google Sheet, Airtable, Petfinder, or a lightweight admin page.</p>
        </div>
        <div class="row">
          <a class="ext" id="linkAdoptionInline" href="https://meowserscatrescue.org/adoption" target="_blank" rel="noopener">View Adoption page (external)</a>
        </div>
      </div>

      <div class="sectionBody">
        <div class="catsHeader">
          <div class="search">
            <span style="color:rgba(255,255,255,.52)">⌕</span>
            <input id="searchInput" placeholder="Search names, traits (example: calm, playful, shy)..." />
          </div>

          <div class="chips" id="chipRow">
            <div class="chip active" data-filter="all">All</div>
            <div class="chip" data-filter="kitten">Kittens</div>
            <div class="chip" data-filter="adult">Adults</div>
            <div class="chip" data-filter="calm">Calm</div>
            <div class="chip" data-filter="playful">Playful</div>
            <div class="chip" data-filter="special">Special care</div>
          </div>
        </div>

        <div class="catGrid" id="catGrid"></div>

        <div class="sep"></div>

        <div class="row">
          <a class="btn ghost" id="linkAdoptionBottom" href="https://meowserscatrescue.org/adoption" target="_blank" rel="noopener">Open adoption listings (external)</a>
          <a class="btn ghost" id="linkAdoptionPdf2" href="https://img1.wsimg.com/blobby/go/9dd7ccac-599b-4487-8e06-01b1cbf3db2d/downloads/Adoption%20Application.pdf?ver=1761926270623" target="_blank" rel="noopener">Adoption Application PDF (external)</a>
        </div>
      </div>
    </section>

    <!-- WAYS TO HELP -->
    <section class="section" id="help">
      <div class="sectionHead">
        <div>
          <h2>Ways to help</h2>
          <p>Quick actions with a native feel, while the real information stays on each shelter's website.</p>
        </div>
      </div>

      <div class="sectionBody">
        <div class="grid">
          <div class="card">
            <div class="cardInner">
              <div class="cardTop">
                <div>
                  <h3>Donate</h3>
                  <div class="sub">Fast, repeatable giving, routes to the shelter's real donate options.</div>
                </div>
                <span class="tag">External</span>
              </div>
              <div class="row">
                <a class="btn small primary" id="linkDonateCard" href="https://meowserscatrescue.org/donate" target="_blank" rel="noopener">Donate options (external)</a>
                <a class="btn small ghost" id="linkShopCard" href="https://meowserscatrescue.org/shop" target="_blank" rel="noopener">Shop (external)</a>
              </div>
              <p class="help">Later, you could add Apple Pay for supported shelters. Version 1 can simply route to existing flows.</p>
            </div>
          </div>

          <div class="card">
            <div class="cardInner">
              <div class="cardTop">
                <div>
                  <h3>Volunteer</h3>
                  <div class="sub">Quick access to volunteer info and the shelter's application PDF.</div>
                </div>
                <span class="tag">External</span>
              </div>
              <div class="row">
                <a class="btn small primary" id="linkVolunteerCard" href="https://meowserscatrescue.org/volunteer" target="_blank" rel="noopener">Volunteer page (external)</a>
                <a class="btn small ghost" id="linkVolunteerPdf2" href="https://img1.wsimg.com/blobby/go/9dd7ccac-599b-4487-8e06-01b1cbf3db2d/downloads/Volunteer%20Application.pdf?ver=1761926270217" target="_blank" rel="noopener">Volunteer PDF (external)</a>
              </div>
              <p class="help">Later, you could include a lightweight "available shifts" calendar, if a shelter wants it.</p>
            </div>
          </div>

          <div class="card">
            <div class="cardInner">
              <div class="cardTop">
                <div>
                  <h3>Contact</h3>
                  <div class="sub">Labelled actions, easy to reach the shelter.</div>
                </div>
                <span class="tag">Label</span>
              </div>
              <div class="row">
                <a class="btn small" id="callBtn" href="tel:7019795602">Call (label)</a>
                <a class="btn small" id="emailBtn" href="mailto:meowserscatrescue@gmail.com">Email (label)</a>
              </div>
              <div class="row" style="margin-top:8px;">
                <a class="btn small ghost" id="linkContactCard" href="https://meowserscatrescue.org/contact-us" target="_blank" rel="noopener">Contact page (external)</a>
              </div>
              <p class="help">For a more app-like feel, you can add "copy to clipboard" buttons later.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- REPORT -->
    <section class="section" id="report">
      <div class="sectionHead">
        <div>
          <h2>Report a cat in need (demo form)</h2>
          <p>This is the "app value-add." Today it just demos. Later it can route to email, Google Sheets, Airtable, or a simple backend.</p>
        </div>
        <div class="row">
          <a class="ext" id="linkPolicies" href="https://meowserscatrescue.org/contact-us" target="_blank" rel="noopener">Policies and contact (external)</a>
        </div>
      </div>

      <div class="sectionBody">
        <div class="grid">
          <div class="card">
            <div class="cardInner">
              <div class="cardTop">
                <div>
                  <h3>How it would work</h3>
                  <div class="sub">Simple now, scalable later.</div>
                </div>
                <span class="tag">Pitch</span>
              </div>
              <p class="help" style="margin-top:0;">
                Version 1:
                <br>• Submit a report (name, contact, location, notes)
                <br>• Optionally attach a photo
                <br>• Route it to an intake email or a shared sheet
              </p>
              <p class="help">
                Version 2:
                <br>• Status updates (received, triaged, assigned)
                <br>• Basic checklist and location pin
                <br>• Internal notes for volunteers
              </p>
              <div class="sep"></div>
              <p class="small">Reminder: This demo uses mock data and does not store anything.</p>
            </div>
          </div>

          <div class="card" style="grid-column: span 2;">
            <div class="cardInner">
              <form id="reportForm">
                <div class="grid" style="grid-template-columns:1fr 1fr;">
                  <div>
                    <label for="rname">Your name</label>
                    <input id="rname" name="name" placeholder="Jane Doe" required>
                  </div>
                  <div>
                    <label for="rcontact">Email or phone</label>
                    <input id="rcontact" name="contact" placeholder="jane@email.com or (555) 555-5555" required>
                  </div>
                </div>

                <label for="rlocation">Location</label>
                <input id="rlocation" name="location" placeholder="Cross streets, address, park name" required>

                <label for="rtype">Situation type</label>
                <select id="rtype" name="type">
                  <option>Stray spotted (unknown)</option>
                  <option>Injured</option>
                  <option>Friendly, may be lost</option>
                  <option>Needs food/water</option>
                  <option>Other</option>
                </select>

                <label for="rdetails">Details</label>
                <textarea id="rdetails" name="details" placeholder="What you noticed, behavior, collar or no collar, how long you've seen them"></textarea>

                <label for="rphoto">Photo (optional, demo)</label>
                <input id="rphoto" type="file" accept="image/*">

                <button class="btn primary" type="submit" style="width:100%; justify-content:center; margin-top:12px;">
                  Submit report (demo)
                </button>

                <div class="toast" id="toast">✅ Demo submitted. Next step would be routing this to the shelter's intake email or a shared sheet.</div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <section class="section" id="footer">
      <div class="sectionBody">
        <div class="row" style="justify-content:space-between;">
          <div class="small">© <span id="year"></span> Rescue Companion (Demo). Mock data only.</div>
          <div class="row">
            <a class="ext" id="footWebsite" href="https://meowserscatrescue.org/" target="_blank" rel="noopener">Shelter website (external)</a>
            <a class="ext" id="footAdopt" href="https://meowserscatrescue.org/adoption" target="_blank" rel="noopener">Adoption (external)</a>
            <a class="ext" id="footDonate" href="https://meowserscatrescue.org/donate" target="_blank" rel="noopener">Donate (external)</a>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Bottom tab bar (demo navigation) -->
  <div class="tabbar">
    <div class="tabs">
      <div class="tab active" data-jump="#featured">Featured</div>
      <div class="tab" data-jump="#adopt">Adopt</div>
      <div class="tab" data-jump="#help">Help</div>
      <div class="tab" data-jump="#report">Report</div>
    </div>
  </div>

  <!-- JSON Import Modal -->
  <div class="modalOverlay" id="importOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Add your shelter via JSON import">
      <div class="modalHead">
        <div>
          <strong>Add your shelter (JSON import)</strong>
          <div class="small">Demo-only, this stores locally on your device</div>
        </div>
        <button class="btn small ghost" type="button" id="closeImport">Close</button>
      </div>
      <div class="modalBody">
        <label for="jsonInput">Paste shelter config JSON</label>
        <textarea id="jsonInput" spellcheck="false"></textarea>
        <div class="err" id="jsonErr"></div>
        <p class="help">
          Required fields: id, name, cityState, phone, email, links (website, adoption, donate, volunteer, shop, contact).
          PDFs are optional, but recommended.
        </p>
      </div>
      <div class="modalFoot">
        <div class="row">
          <button class="btn small" type="button" id="fillSample">Fill sample JSON</button>
          <button class="btn small ghost" type="button" id="copySample">Copy sample</button>
        </div>
        <div class="row">
          <button class="btn small primary" type="button" id="importJson">Import shelter</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Demo Mode toggle (purely visual)
    const demoSwitch = document.getElementById("demoSwitch");
    const phoneDot = document.getElementById("phoneDot");
    let demoMode = true;

    function setDemoMode(isOn){
      demoSwitch.classList.toggle("on", isOn);
      demoSwitch.setAttribute("aria-checked", String(isOn));
      phoneDot.classList.toggle("off", true);
      document.title = isOn
        ? "Rescue Companion (Demo) | Adopt, Volunteer, Donate"
        : "Rescue Companion | Adopt, Volunteer, Donate";
    }
    setDemoMode(demoMode);

    function toggleDemo(){
      demoMode = !demoMode;
      setDemoMode(demoMode);
    }
    demoSwitch.addEventListener("click", toggleDemo);
    demoSwitch.addEventListener("keydown", (e) => {
      if(e.key === "Enter" || e.key === " "){
        e.preventDefault();
        toggleDemo();
      }
    });

    // Helpers
    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
    function initials(name){
      const parts = String(name || "").trim().split(/\s+/).filter(Boolean);
      const a = (parts[0] || "R")[0];
      const b = (parts[1] || parts[0] || "C")[0];
      return (a + b).toUpperCase();
    }
    function normalizePhone(phone){
      const digits = String(phone || "").replace(/\D/g,"");
      if(!digits) return "";
      return digits;
    }
    function safeUrl(u){
      const s = String(u || "").trim();
      return s || "#";
    }

    // Shelter directory (defaults + local custom imports)
    const STORAGE_KEY = "rc_custom_shelters_v1";
    const ACTIVE_KEY = "rc_active_shelter_v1";

    const DEFAULT_SHELTERS = [
      {
        id: "meowsers",
        featured: true,
        name: "Meowsers Cat Rescue",
        cityState: "Bowman, ND",
        phone: "701-979-5602",
        email: "meowserscatrescue@gmail.com",
        links: {
          website: "https://meowserscatrescue.org/",
          adoption: "https://meowserscatrescue.org/adoption",
          donate: "https://meowserscatrescue.org/donate",
          volunteer: "https://meowserscatrescue.org/volunteer",
          shop: "https://meowserscatrescue.org/shop",
          contact: "https://meowserscatrescue.org/contact-us"
        },
        pdfs: {
          adoptionApp: "https://img1.wsimg.com/blobby/go/9dd7ccac-599b-4487-8e06-01b1cbf3db2d/downloads/Adoption%20Application.pdf?ver=1761926270623",
          volunteerApp: "https://img1.wsimg.com/blobby/go/9dd7ccac-599b-4487-8e06-01b1cbf3db2d/downloads/Volunteer%20Application.pdf?ver=1761926270217"
        }
      },
      {
        id: "pawsandwhiskers",
        featured: true,
        name: "Paws & Whiskers Rescue",
        cityState: "Fort Collins, CO",
        phone: "970-555-0142",
        email: "hello@pawsandwhiskers.example",
        links: {
          website: "https://example.com/",
          adoption: "https://example.com/",
          donate: "https://example.com/",
          volunteer: "https://example.com/",
          shop: "https://example.com/",
          contact: "https://example.com/"
        },
        pdfs: {
          adoptionApp: "https://example.com/",
          volunteerApp: "https://example.com/"
        }
      },
      {
        id: "midnightmitten",
        featured: true,
        name: "Midnight Mitten Society",
        cityState: "Madison, WI",
        phone: "608-555-0188",
        email: "team@midnightmitten.example",
        links: {
          website: "https://example.com/",
          adoption: "https://example.com/",
          donate: "https://example.com/",
          volunteer: "https://example.com/",
          shop: "https://example.com/",
          contact: "https://example.com/"
        },
        pdfs: {
          adoptionApp: "https://example.com/",
          volunteerApp: "https://example.com/"
        }
      },
      {
        id: "coastalcats",
        featured: false,
        name: "Coastal Cats Collective",
        cityState: "San Diego, CA",
        phone: "619-555-0120",
        email: "info@coastalcats.example",
        links: {
          website: "https://example.com/",
          adoption: "https://example.com/",
          donate: "https://example.com/",
          volunteer: "https://example.com/",
          shop: "https://example.com/",
          contact: "https://example.com/"
        },
        pdfs: {
          adoptionApp: "https://example.com/",
          volunteerApp: "https://example.com/"
        }
      }
    ];

    function loadCustomShelters(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return [];
        const arr = JSON.parse(raw);
        if(!Array.isArray(arr)) return [];
        return arr;
      }catch(_){
        return [];
      }
    }

    function saveCustomShelters(arr){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
    }

    function getShelters(){
      const custom = loadCustomShelters();
      const merged = [...DEFAULT_SHELTERS];

      // prevent duplicate IDs
      const used = new Set(merged.map(s => s.id));
      for(const c of custom){
        if(c && typeof c === "object" && c.id && !used.has(c.id)){
          merged.push(c);
          used.add(c.id);
        }
      }
      return merged;
    }

    let shelters = getShelters();

    // Active shelter
    function getActiveShelterId(){
      return localStorage.getItem(ACTIVE_KEY) || "meowsers";
    }
    function setActiveShelterId(id){
      localStorage.setItem(ACTIVE_KEY, id);
    }

    let activeShelterId = getActiveShelterId();

    function findShelter(id){
      return shelters.find(s => s.id === id) || shelters[0];
    }

    // Wire DOM link targets
    const activeShelterTag = document.getElementById("activeShelterTag");
    const brandSub = document.getElementById("brandSub");
    const callPill = document.getElementById("callPill");
    const callLabel = document.getElementById("callLabel");
    const callBtn = document.getElementById("callBtn");
    const emailBtn = document.getElementById("emailBtn");

    const linkWebsite = document.getElementById("linkWebsite");
    const linkAdoption = document.getElementById("linkAdoption");
    const linkDonate = document.getElementById("linkDonate");
    const linkVolunteer = document.getElementById("linkVolunteer");
    const linkShop = document.getElementById("linkShop");
    const linkContact = document.getElementById("linkContact");

    const linkAdoptionInline = document.getElementById("linkAdoptionInline");
    const linkAdoptionBottom = document.getElementById("linkAdoptionBottom");
    const linkDonateCard = document.getElementById("linkDonateCard");
    const linkShopCard = document.getElementById("linkShopCard");
    const linkVolunteerCard = document.getElementById("linkVolunteerCard");
    const linkContactCard = document.getElementById("linkContactCard");
    const linkPolicies = document.getElementById("linkPolicies");

    const linkAdoptionPdf = document.getElementById("linkAdoptionPdf");
    const linkVolunteerPdf = document.getElementById("linkVolunteerPdf");
    const linkAdoptionPdf2 = document.getElementById("linkAdoptionPdf2");
    const linkVolunteerPdf2 = document.getElementById("linkVolunteerPdf2");

    const footWebsite = document.getElementById("footWebsite");
    const footAdopt = document.getElementById("footAdopt");
    const footDonate = document.getElementById("footDonate");

    const pitchNote = document.getElementById("pitchNote");

    // Populate shelter select
    const shelterSelect = document.getElementById("shelterSelect");

    function populateShelterSelect(){
      shelters = getShelters();
      shelterSelect.innerHTML = shelters.map(s => {
        const label = `${s.name} (${s.cityState})`;
        const sel = s.id === activeShelterId ? "selected" : "";
        return `<option value="${escapeHtml(s.id)}" ${sel}>${escapeHtml(label)}</option>`;
      }).join("");
    }

    function applyShelterToUI(s){
      activeShelterTag.textContent = `Selected: ${s.name}`;
      brandSub.textContent = `${s.name}, ${s.cityState}, demo shelter directory with labeled external links`;

      const tel = normalizePhone(s.phone);
      callPill.href = tel ? `tel:${tel}` : "#";
      callLabel.textContent = `Call (label): ${s.phone || "N/A"}`;
      callBtn.href = tel ? `tel:${tel}` : "#";
      callBtn.textContent = `Call (label): ${s.phone || "N/A"}`;

      emailBtn.href = s.email ? `mailto:${s.email}` : "#";
      emailBtn.textContent = `Email (label): ${s.email || "N/A"}`;

      linkWebsite.href = safeUrl(s.links?.website);
      linkAdoption.href = safeUrl(s.links?.adoption);
      linkDonate.href = safeUrl(s.links?.donate);
      linkVolunteer.href = safeUrl(s.links?.volunteer);
      linkShop.href = safeUrl(s.links?.shop);
      linkContact.href = safeUrl(s.links?.contact);

      linkAdoptionInline.href = safeUrl(s.links?.adoption);
      linkAdoptionBottom.href = safeUrl(s.links?.adoption);
      linkDonateCard.href = safeUrl(s.links?.donate);
      linkShopCard.href = safeUrl(s.links?.shop);
      linkVolunteerCard.href = safeUrl(s.links?.volunteer);
      linkContactCard.href = safeUrl(s.links?.contact);
      linkPolicies.href = safeUrl(s.links?.contact);

      // PDF links (optional)
      const adoptPdf = safeUrl(s.pdfs?.adoptionApp);
      const volPdf = safeUrl(s.pdfs?.volunteerApp);

      linkAdoptionPdf.href = adoptPdf;
      linkAdoptionPdf2.href = adoptPdf;

      linkVolunteerPdf.href = volPdf;
      linkVolunteerPdf2.href = volPdf;

      footWebsite.href = safeUrl(s.links?.website);
      footAdopt.href = safeUrl(s.links?.adoption);
      footDonate.href = safeUrl(s.links?.donate);

      // Slightly personalize the pitch note
      pitchNote.textContent = `Pitch angle: ${s.name} keeps their site. This app adds a unified directory, a better mobile experience, and a report intake pipeline. Version 1 can route reports to an intake email or a shared sheet later.`;
    }

    function setActiveShelter(id, scrollToFeatured=false){
      activeShelterId = id;
      setActiveShelterId(id);
      populateShelterSelect();
      const s = findShelter(id);
      applyShelterToUI(s);
      renderFeatured();
      renderCats(); // refresh adoption links inside cards
      if(scrollToFeatured){
        document.querySelector("#featured").scrollIntoView({behavior:"smooth", block:"start"});
      }
    }

    shelterSelect.addEventListener("change", () => {
      setActiveShelter(shelterSelect.value);
    });

    // Featured shelters
    const featuredRow = document.getElementById("featuredRow");
    const featuredCount = document.getElementById("featuredCount");

    function renderFeatured(){
      const featured = shelters.filter(s => !!s.featured);
      featuredCount.textContent = `${featured.length} featured`;

      featuredRow.innerHTML = featured.map(s => `
        <div class="featuredCard">
          <div class="featuredTop">
            <div class="row" style="flex-wrap:nowrap; gap:10px; min-width:0;">
              <div class="logoBubble" aria-hidden="true">${escapeHtml(initials(s.name))}</div>
              <div class="featuredMeta">
                <strong title="${escapeHtml(s.name)}">${escapeHtml(s.name)}</strong>
                <span title="${escapeHtml(s.cityState)}">${escapeHtml(s.cityState)}</span>
              </div>
            </div>
            <span class="tag">Featured</span>
          </div>
          <div class="featuredBottom">
            <span class="featuredPill">Adopt, Donate, Volunteer</span>
            <button class="btn small primary" type="button" data-pick="${escapeHtml(s.id)}">Select</button>
          </div>
        </div>
      `).join("");

      Array.from(featuredRow.querySelectorAll("button[data-pick]")).forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-pick");
          setActiveShelter(id);
          document.querySelector("#adopt").scrollIntoView({behavior:"smooth", block:"start"});
        });
      });
    }

    // Segmented control scroll
    const segBtns = Array.from(document.querySelectorAll(".seg button"));
    segBtns.forEach(btn => {
      btn.addEventListener("click", () => {
        segBtns.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        const focus = btn.dataset.focus;
        const map = { featured:"#featured", adopt:"#adopt", report:"#report" };
        document.querySelector(map[focus]).scrollIntoView({behavior:"smooth", block:"start"});
      });
    });

    // Bottom tabs
    const tabs = Array.from(document.querySelectorAll(".tab"));
    tabs.forEach(t => {
      t.addEventListener("click", () => {
        tabs.forEach(x => x.classList.remove("active"));
        t.classList.add("active");
        const jump = t.dataset.jump;
        document.querySelector(jump).scrollIntoView({behavior:"smooth", block:"start"});
      });
    });

    // Mock cat data, with real cat photos from a public placeholder service (random cats)
    // If you want consistent photos (not changing), replace these URLs later with your own hosted images.
    const cats = [
      {
        name: "Juniper",
        age: "Kitten",
        traits: ["playful","kitten"],
        tags: ["Spunky", "Great with kids"],
        note: "Loves wand toys, fearless explorer, purrs the moment you look at her.",
        hero: "https://cataas.com/cat?width=900&height=520&random=11",
        thumbs: [
          "https://cataas.com/cat?width=380&height=220&random=111",
          "https://cataas.com/cat?width=380&height=220&random=112",
          "https://cataas.com/cat?width=380&height=220&random=113"
        ]
      },
      {
        name: "Mochi",
        age: "Adult",
        traits: ["calm","adult"],
        tags: ["Cuddle bug", "Lap cat"],
        note: "Quiet, gentle, and happiest in a sunny window. Low drama, high affection.",
        hero: "https://cataas.com/cat?width=900&height=520&random=21",
        thumbs: [
          "https://cataas.com/cat?width=380&height=220&random=211",
          "https://cataas.com/cat?width=380&height=220&random=212",
          "https://cataas.com/cat?width=380&height=220&random=213"
        ]
      },
      {
        name: "Atlas",
        age: "Adult",
        traits: ["adult","special"],
        tags: ["Special care", "Chill vibe"],
        note: "Needs a steady routine. Once he trusts you, he becomes a total sweetheart.",
        hero: "https://cataas.com/cat?width=900&height=520&random=31",
        thumbs: [
          "https://cataas.com/cat?width=380&height=220&random=311",
          "https://cataas.com/cat?width=380&height=220&random=312",
          "https://cataas.com/cat?width=380&height=220&random=313"
        ]
      },
      {
        name: "Peaches",
        age: "Kitten",
        traits: ["kitten","playful"],
        tags: ["Social", "Curious"],
        note: "Bold little gremlin, always first to greet you, always last to nap.",
        hero: "https://cataas.com/cat?width=900&height=520&random=41",
        thumbs: [
          "https://cataas.com/cat?width=380&height=220&random=411",
          "https://cataas.com/cat?width=380&height=220&random=412",
          "https://cataas.com/cat?width=380&height=220&random=413"
        ]
      },
      {
        name: "Sable",
        age: "Adult",
        traits: ["adult","calm"],
        tags: ["Gentle", "Quiet home"],
        note: "Best in a calm environment. She warms up slowly, then bonds hard.",
        hero: "https://cataas.com/cat?width=900&height=520&random=51",
        thumbs: [
          "https://cataas.com/cat?width=380&height=220&random=511",
          "https://cataas.com/cat?width=380&height=220&random=512",
          "https://cataas.com/cat?width=380&height=220&random=513"
        ]
      },
      {
        name: "Waffles",
        age: "Kitten",
        traits: ["kitten","playful"],
        tags: ["Goofy", "Food motivated"],
        note: "Will absolutely steal your heart, then steal your snacks if you blink.",
        hero: "https://cataas.com/cat?width=900&height=520&random=61",
        thumbs: [
          "https://cataas.com/cat?width=380&height=220&random=611",
          "https://cataas.com/cat?width=380&height=220&random=612",
          "https://cataas.com/cat?width=380&height=220&random=613"
        ]
      }
    ];

    const catGrid = document.getElementById("catGrid");
    const searchInput = document.getElementById("searchInput");
    const chipRow = document.getElementById("chipRow");
    let activeFilter = "all";

    function renderCats(){
      const q = (searchInput.value || "").trim().toLowerCase();
      const filtered = cats.filter(c => {
        const inSearch =
          !q ||
          c.name.toLowerCase().includes(q) ||
          c.note.toLowerCase().includes(q) ||
          c.tags.join(" ").toLowerCase().includes(q) ||
          c.traits.join(" ").toLowerCase().includes(q);

        const inFilter =
          activeFilter === "all" ? true : c.traits.includes(activeFilter);

        return inSearch && inFilter;
      });

      const shelter = findShelter(activeShelterId);
      const adoptionUrl = safeUrl(shelter.links?.adoption);
      const adoptionPdf = safeUrl(shelter.pdfs?.adoptionApp);

      catGrid.innerHTML = filtered.map(c => `
        <div class="catCard">
          <div class="catMedia">
            <img class="hero" src="${escapeHtml(c.hero)}" alt="Photo of ${escapeHtml(c.name)}" loading="lazy" />
            <div class="mediaLabel">Photos: demo placeholder</div>
            <div class="thumbRow">
              <div class="thumb"><img src="${escapeHtml(c.thumbs[0])}" alt="Thumbnail 1 of ${escapeHtml(c.name)}" loading="lazy"></div>
              <div class="thumb"><img src="${escapeHtml(c.thumbs[1])}" alt="Thumbnail 2 of ${escapeHtml(c.name)}" loading="lazy"></div>
              <div class="thumb"><img src="${escapeHtml(c.thumbs[2])}" alt="Thumbnail 3 of ${escapeHtml(c.name)}" loading="lazy"></div>
            </div>
          </div>

          <div class="catBody">
            <div class="catTitle">
              <div>
                <strong>${escapeHtml(c.name)}</strong>
                <div class="sub">${escapeHtml(c.age)} • Mock profile</div>
              </div>
              <a class="ext" href="${escapeHtml(adoptionUrl)}" target="_blank" rel="noopener" title="External link">
                Adoption page (external)
              </a>
            </div>

            <div class="meta">
              ${c.tags.map(t => `<span>${escapeHtml(t)}</span>`).join("")}
            </div>

            <div class="catNote">${escapeHtml(c.note)}</div>

            <div class="row" style="margin-top:12px;">
              <a class="btn small primary" href="${escapeHtml(adoptionPdf)}" target="_blank" rel="noopener">
                Apply (PDF external)
              </a>
              <button class="btn small" type="button" data-save="${escapeHtml(c.name)}">
                Save ♥ (demo)
              </button>
            </div>
          </div>
        </div>
      `).join("");

      if(filtered.length === 0){
        catGrid.innerHTML = `
          <div class="card" style="grid-column:1/-1;">
            <div class="cardInner">
              <h3>No matches</h3>
              <p class="help">Try a different search or filter chip.</p>
            </div>
          </div>
        `;
      }

      // Wire save buttons
      Array.from(catGrid.querySelectorAll("button[data-save]")).forEach(btn => {
        btn.addEventListener("click", () => {
          const name = btn.getAttribute("data-save");
          alert("Demo only: Saved " + name + " to favorites (pretend).");
        });
      });
    }

    searchInput.addEventListener("input", renderCats);

    chipRow.addEventListener("click", (e) => {
      const chip = e.target.closest(".chip");
      if(!chip) return;
      Array.from(chipRow.querySelectorAll(".chip")).forEach(c => c.classList.remove("active"));
      chip.classList.add("active");
      activeFilter = chip.dataset.filter;
      renderCats();
    });

    // Report form demo submit
    const form = document.getElementById("reportForm");
    const toast = document.getElementById("toast");

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      toast.style.display = "block";
      form.reset();
      setTimeout(() => toast.style.display = "none", 5200);
    });

    // JSON Import
    const importOverlay = document.getElementById("importOverlay");
    const openImportBtn = document.getElementById("openImport");
    const closeImportBtn = document.getElementById("closeImport");
    const jsonInput = document.getElementById("jsonInput");
    const jsonErr = document.getElementById("jsonErr");
    const importJsonBtn = document.getElementById("importJson");
    const fillSampleBtn = document.getElementById("fillSample");
    const copySampleBtn = document.getElementById("copySample");
    const clearCustomBtn = document.getElementById("clearCustom");

    const SAMPLE_SHELTER = {
      id: "sunnytails",
      featured: true,
      name: "Sunny Tails Rescue",
      cityState: "Austin, TX",
      phone: "512-555-0177",
      email: "hello@sunnytails.example",
      links: {
        website: "https://example.com/",
        adoption: "https://example.com/",
        donate: "https://example.com/",
        volunteer: "https://example.com/",
        shop: "https://example.com/",
        contact: "https://example.com/"
      },
      pdfs: {
        adoptionApp: "https://example.com/",
        volunteerApp: "https://example.com/"
      }
    };

    function showImport(){
      jsonErr.style.display = "none";
      jsonErr.textContent = "";
      importOverlay.classList.add("show");
      importOverlay.setAttribute("aria-hidden", "false");
      if(!jsonInput.value.trim()){
        jsonInput.value = JSON.stringify(SAMPLE_SHELTER, null, 2);
      }
      setTimeout(() => jsonInput.focus(), 50);
    }
    function hideImport(){
      importOverlay.classList.remove("show");
      importOverlay.setAttribute("aria-hidden", "true");
    }

    openImportBtn.addEventListener("click", showImport);
    closeImportBtn.addEventListener("click", hideImport);
    importOverlay.addEventListener("click", (e) => {
      if(e.target === importOverlay) hideImport();
    });
    document.addEventListener("keydown", (e) => {
      if(e.key === "Escape" && importOverlay.classList.contains("show")) hideImport();
    });

    fillSampleBtn.addEventListener("click", () => {
      jsonInput.value = JSON.stringify(SAMPLE_SHELTER, null, 2);
      jsonErr.style.display = "none";
      jsonErr.textContent = "";
    });

    copySampleBtn.addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(JSON.stringify(SAMPLE_SHELTER, null, 2));
        alert("Copied sample JSON.");
      }catch(_){
        alert("Could not copy automatically. You can manually select and copy.");
      }
    });

    function validateShelter(obj){
      const requiredTop = ["id","name","cityState","phone","email","links"];
      for(const k of requiredTop){
        if(!obj || typeof obj !== "object" || !(k in obj)) return `Missing required field: ${k}`;
      }
      if(typeof obj.id !== "string" || !obj.id.trim()) return "Field 'id' must be a non-empty string.";
      if(!/^[a-z0-9\-_.]+$/i.test(obj.id.trim())) return "Field 'id' should only use letters, numbers, and - _ . characters.";
      if(typeof obj.links !== "object") return "Field 'links' must be an object.";
      const requiredLinks = ["website","adoption","donate","volunteer","shop","contact"];
      for(const k of requiredLinks){
        if(!(k in obj.links)) return `Missing links.${k}`;
        if(typeof obj.links[k] !== "string" || !obj.links[k].trim()) return `links.${k} must be a non-empty string.`;
      }
      return null;
    }

    function loadCustomShelters(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return [];
        const arr = JSON.parse(raw);
        if(!Array.isArray(arr)) return [];
        return arr;
      }catch(_){
        return [];
      }
    }

    function saveCustomShelters(arr){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
    }

    function getShelters(){
      const custom = loadCustomShelters();
      const merged = [...DEFAULT_SHELTERS];

      const used = new Set(merged.map(s => s.id));
      for(const c of custom){
        if(c && typeof c === "object" && c.id && !used.has(c.id)){
          merged.push(c);
          used.add(c.id);
        }
      }
      return merged;
    }

    importJsonBtn.addEventListener("click", () => {
      jsonErr.style.display = "none";
      jsonErr.textContent = "";

      let parsed;
      try{
        parsed = JSON.parse(jsonInput.value);
      }catch(err){
        jsonErr.style.display = "block";
        jsonErr.textContent = "Invalid JSON. Fix syntax and try again.";
        return;
      }

      const msg = validateShelter(parsed);
      if(msg){
        jsonErr.style.display = "block";
        jsonErr.textContent = msg;
        return;
      }

      const custom = loadCustomShelters();
      const idx = custom.findIndex(s => s && s.id === parsed.id);
      if(idx >= 0){
        custom[idx] = parsed;
      }else{
        custom.push(parsed);
      }
      saveCustomShelters(custom);

      shelters = getShelters();
      populateShelterSelect();
      hideImport();
      setActiveShelter(parsed.id, true);

      alert("Imported! Shelter added to the picker on this device (demo).");
    });

    clearCustomBtn.addEventListener("click", () => {
      const ok = confirm("Reset custom shelters on this device? This removes any imported shelters from the picker.");
      if(!ok) return;
      localStorage.removeItem(STORAGE_KEY);
      shelters = getShelters();
      populateShelterSelect();
      setActiveShelter(activeShelterId);
      alert("Custom shelters cleared (demo).");
    });

    // Initial render
    populateShelterSelect();
    setActiveShelter(activeShelterId);
  </script>
</body>
</html>
